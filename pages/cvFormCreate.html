<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../asset/styles/output.css">
  <script src="https://kit.fontawesome.com/f01941449c.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.2/html2pdf.bundle.min.js"
    integrity="sha512-MpDFIChbcXl2QgipQrt1VcPHMldRILetapBl5MPCA9Y8r7qvlwx1/Mc9hNTzY+kS5kX6PdoDq41ws1HiVNLdZA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <title>Document</title>
</head>

<body style="background: rgb(239, 239, 239);">

  <header class="h-16 w-100 bg-blue-700 flex justify-center items-center ">
    <h1 class="text-2xl text-white"><a href="../index.html">Build Your CV</a></h1>
  </header>

  <main id="versionCv1" class="flex justify-start items-start">
    <div class="liba bg-slate-400 shadow-lg w-1/2" id="liba">

    </div>
    <div id="formSteppers" class="w-1/2 min-h-screen flex items-start justify-center" style="width: 27rem; max-height: 90vh; overflow-y: auto;">
      <div class="container mx-auto p-4 overflow-scroll h-screen relative bg-black rounded-lg shadow ">
        <div class="bg-white rounded-lg overflow-scroll shadow-lg p-6 md:p-10 w-100 mx-auto">
          <h1 class="text-3xl font-bold text-center mb-8">CV Builder Steps</h1>

          <!-- Progress Bar -->
          <div class="mb-11">
            <div class="flex justify-between mb-2">
              <span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200"
                id="step1">
                <i class="fa-solid fa-user"></i>
              </span>
              <span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step2">
                step2
              </span>
              <span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step3">
                <i class="fas fa-language"></i>
              </span>
              <span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step4">
                <i class="fas fa-graduation-cap"></i>
              </span><span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step5">
                <i class="fas fa-puzzle-piece"></i>
              </span><span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step6">
                <i class="fa-solid fa-briefcase"></i>
              </span><span
                class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-green-200 opacity-50"
                id="step7">
                <i class="fas fa-certificate"></i>
              </span>
            </div>
            <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-green-200">
              <div id="progress-bar"
                class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-green-500 w-1/3 transition-all duration-500 ease-in-out">
              </div>
            </div>
          </div>

          <!-- Form Steps -->
          <form id="multi-step-form">

            <!-- Step 1: Personal Information -->
            <div id="step-1"
              class="step animate__animated animate__backInRight flex flex-col justify-center p-5 bg-white rounded-lg">
              <!-- Profile Image Upload -->
              <div class="relative w-full mb-8">
                <label for="img" class="block mb-2 text-sm font-medium text-gray-900">Upload Profile Image</label>
                <input type="file" id="img"
                  class="photo block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500">
              </div>

              <!-- Full Name -->
              <div class="mb-6">
                <label for="fullName" class="block mb-2 text-sm font-medium text-gray-900">Full Name</label>
                <input type="text" id="fullName"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="Enter your full name" required>
              </div>

              <!-- Email Address -->
              <div class="mb-6">
                <label for="email" class="block mb-2 text-sm font-medium text-gray-900">Email Address</label>
                <input type="email" id="email"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="example@domain.com" required>
              </div>

              <!-- Phone Number -->
              <div class="mb-6">
                <label for="phone" class="block mb-2 text-sm font-medium text-gray-900">Phone Number</label>
                <input type="tel" id="phone"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="Enter your phone number" required>
              </div>

              <!-- Address -->
              <div class="mb-6">
                <label for="address" class="block mb-2 text-sm font-medium text-gray-900">Address</label>
                <input type="text" id="address"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="Enter your address" required>
              </div>

              <!-- LinkedIn -->
              <div class="mb-6">
                <label for="LinkedIn" class="block mb-2 text-sm font-medium text-gray-900">LinkedIn</label>
                <input type="url" id="LinkedIn"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="LinkedIn profile URL" required>
              </div>

              <!-- GitHub -->
              <div class="mb-6">
                <label for="GitHub" class="block mb-2 text-sm font-medium text-gray-900">GitHub</label>
                <input type="url" id="GitHub"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="GitHub profile URL" required>
              </div>

              <!-- Portfolio -->
              <div class="mb-6">
                <label for="portfolio" class="block mb-2 text-sm font-medium text-gray-900">Portfolio</label>
                <input type="url" id="portfolio"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  placeholder="Portfolio URL" required>
              </div>
            </div>

            <!-- Step 2: info Details -->
            <div id="step-2" class="step hidden">
              <h2 class="text-xl font-semibold text-gray-800 mb-6">info Details</h2>
              <div class="mb-6">
                <label for="titre" class="block mb-2 text-sm font-medium text-gray-900">titre</label>
                <input type="text" id="titre"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  required>
              </div>
              <div class="mb-6">
                <label for="textarea" class="block mb-2 text-sm font-medium text-gray-900">résumé de profil</label>
                <textarea name="textarea"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                  id="textarea" required></textarea>
              </div>
            </div>

            <!-- Step 3: Compétences techniques et soft skills-->
            <div id="step-3" class="step hidden bg-white p-6 rounded-lg">
              <h2 class="text-xl font-semibold text-gray-800 mb-6">Compétences techniques et soft skills</h2>
              <!-- Hard Skills Section -->
              <div class="mb-6">
                <div class="flex flex-col items-start mb-4">
                  <label for="hardSkills" class="ml-2 text-sm font-medium text-gray-900">Hard Skills</label>
                  <div id="hardSkillsDiv" class="flex-col gap-4 mt-2">
                    <div class="flex-col items-center gap-2">
                      <button
                        class="mb-6 px-4 py-2 fa-circle-plus bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        + Add
                      </button>
                      <input type="text" id="hardSkills"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                        placeholder="Enter hard skill" required>
                    </div>
                    <span id="error" class="text-red-500 text-xs mt-1 hidden">Please enter a valid skill.</span>
                  </div>
                </div>

                <!-- Soft Skills Section -->
                <div class="flex flex-col items-start">
                  <label for="softSkills" class="ml-2 text-sm font-medium text-gray-900">Soft Skills</label>
                  <div id="SoftSkillsDiv" class="flex flex-col gap-4 mt-2">
                    <div class="flex-col items-center gap-2">
                      <button
                        class="mb-6 px-4 py-2 fa-circle-plus bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        + Add
                      </button>
                      <input type="text" id="softSkills"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                        placeholder="Enter soft skill" required>
                    </div>
                    <span id="error" class="text-red-500 text-xs mt-1 hidden">Please enter a valid skill.</span>
                  </div>
                </div>
              </div>
            </div>

            <!--Step 4: Langues & Loisirs -->
            <div id="step-4" class="step flex flex-col justify-center items-center p-6 bg-white rounded-lg">
              <h2 class="text-xl font-semibold text-gray-800 mb-6">Langues & Loisirs</h2>
              <!-- Langues Section -->
              <div class="languess border rounded-xl mb-6 p-4 bg-gray-50">
                <div class="flex flex-col items-start mb-6">
                  <label for="langues" class="ml-2 text-sm font-medium text-gray-900">Langues</label>
                  <div class="flex flex-col gap-4 mt-2">
                    <button
                      class="mb-6 px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                      + Add
                    </button>
                    <div class="flex gap-2 mt-2">
                      <input type="text" id="langues"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                        placeholder="Ex: Arabic, English" required>
                      <input type="text" id="proficiency"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                        placeholder="Ex: Native, Intermediate, Advanced" required>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Loisirs et Intérêts Section -->
              <div class="loisirsInterets border rounded-xl p-4 bg-gray-50">
                <div class="flex flex-col items-start mb-6">
                  <label for="loisirs" class="ml-2 text-sm font-medium text-gray-900">Loisirs et Intérêts</label>
                  <div id="loisirsDiv" class="flex flex-col gap-4 mt-2">
                    <button
                      class="mb-6 px-4 py-2 fa-circle-plus bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                      + Add
                    </button>
                    <input type="text" id="loisirs"
                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"
                      placeholder="Enter a hobby or interest" required>
                  </div>
                </div>
              </div>
            </div>

            <!--Step 5: Formation -->
            <div id="step-5" class="step flex flex-col justify-center items-center p-5 bg-white rounded-lg">
              <h2 class="text-2xl font-semibold mb-6 text-gray-800">Formation</h2>
              <!-- Add Education Button -->
              <button id="btn"
                class="btnAddinput mb-6 px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                + Add
              </button>
              <div id="eduction" class="parent education">
                <!-- University Name -->
                <div class="mb-6 w-full">
                  <label for="university" class="block text-sm font-medium text-gray-700 mb-2">University Name:</label>
                  <input type="text" id="university" name="university"
                    placeholder="e.g., California State University East Bay" required
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <!-- Start Year and End Year -->
                <div class="flex space-x-4 mb-6 w-full">
                  <div class="flex-1">
                    <label for="startYear" class="block text-sm font-medium text-gray-700 mb-2">Start Year:</label>
                    <input type="number" id="startYear" name="startYear" placeholder="e.g., 2009" required
                      class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
                  <div class="flex-1">
                    <label for="endYear" class="block text-sm font-medium text-gray-700 mb-2">End Year:</label>
                    <input type="number" id="endYear" name="endYear" placeholder="e.g., 2014" required
                      class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
                </div>
                <!-- Major -->
                <div class="w-full">
                  <label for="major" class="block text-sm font-medium text-gray-700 mb-2">Major:</label>
                  <input type="text" id="major" name="major" placeholder="e.g., Political Science" required
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              </div>
            </div>

            <!-- Step 7: Expériences professionnelles -->
            <div id="step-6" class=" step flex-col justify-center items-center p-5 bg-white rounded-lg">
              <h2 class="text-2xl font-semibold mb-6 text-gray-800">Expériences professionnelles</h2>
              <button id="btn"
                class="btnAddinput mb-6 px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                + Add
              </button>
              <div id="Experiences" class="parentExperiences">
                <!-- Company Name -->
                <div class="mb-6 w-full">
                  <label for="company" class="block text-sm font-medium text-gray-700 mb-2">Nom de l'entreprise:</label>
                  <input type="text" id="company" name="company" placeholder="e.g., Cherifia Commercial Center" required
                    class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Position -->
                <div class="mb-6 w-full">
                  <label for="position" class="block text-sm font-medium text-gray-700 mb-2">Poste:</label>
                  <input type="text" id="position" name="position" placeholder="e.g., Gestionnaire de stock" required
                    class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Start Date and End Date -->
                <div class="flex space-x-4 mb-6 w-full">
                  <div class="flex-1">
                    <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">Date de début:</label>
                    <input type="date" id="startDate" name="startDate" required
                      class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
                  <div class="flex-1">
                    <label for="endDate" class="block text-sm font-medium text-gray-700 mb-2">Date de fin:</label>
                    <input type="date" id="endDate" name="endDate" required
                      class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  </div>
                </div>

                <!-- Location -->
                <div class="mb-6 w-full">
                  <label for="location" class="block text-sm font-medium text-gray-700 mb-2">Lieu:</label>
                  <input type="text" id="location" name="location" placeholder="e.g., Casablanca, Maroc" required
                    class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Job Description -->
                <div class="mb-6 w-full">
                  <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Description du
                    poste:</label>
                  <textarea id="description" name="description"
                    placeholder="Décrivez les responsabilités et les réalisations..." rows="4" required
                    class="childinputExperiences w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
              </div>
            </div>

            <!-- Step 8: Certifications -->
            <div id="step-7" class="step hidden">
              <h2 class="text-xl font-semibold text-gray-800 mb-6">Certifications</h2>

              <div class="mb-6">
                <div class="flex-col items-center mb-4">
                  <label for="Certifications" class="ml-2 text-sm font-medium text-gray-900">Certifications</label>
                  <div class="flex-col gap-40 ">
                    <button
                      class="mb-6 px-4 py-2 fa-circle-plus bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                      + Add
                    </button>
                    <input type="file" id="Certifications"
                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full  p-2.5"
                      required>
                  </div>
                </div>
              </div>
            </div>


            <div class="flex justify-between mt-8">
              <button type="button" id="prevBtn"
                class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 focus:outline-none focus:shadow-outline none">Previous</button>
              <button type="button" id="nextBtn"
                class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:shadow-outline">Next</button>
              <button type="submit" id="submitBtn"
                class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:shadow-outline hidden">Submit</button>
              <button type="button" id="btndwlond"
                class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:shadow-outline">cv</button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </main>

  <script>


// let btndwlond=document.getElementById("btndwlond")
// let versionCv1=document.getElementById("versionCv1")

// let inputPhotosUrl = document.querySelector(".photo").files[0];
//   inputPhoto = URL.createObjectURL(inputPhotosUrl);

//   btndwlond.addEventListener("click", async function () {

// const filename = "my-cv.pdf";

// const options = {
//   margin: 0,
//   filename: filename,
//   image: { type: "jpeg", quality: 0.98 },
//   html2canvas: { scale: 2 },
//   jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
// };
// try {
//   await html2pdf().set(options).from(versionCv1).save();
// } catch (error) {
//   console.error("false:", error.message);
// }
// });






    let currentStep = 1;
    let prevBtn = document.getElementById("prevBtn");
    let nextBtn = document.getElementById("nextBtn");
    let inputdynamicForm = document.getElementById("inputdynamicForm");
    let steps = document.getElementsByClassName("step");
    let form = document.getElementById('multi-step-form');
    let submitBtn = document.getElementById('submitBtn');
    let progressBar = document.getElementById('progress-bar');

    // let fullName=document.getElementById("fullName").value;
    // let email=document.getElementById("email").value;
    // let phone=document.getElementById("phone").value;
    // let address=document.getElementById("address").value;
    // let LinkedIn=document.getElementById("LinkedIn").value;
    // let GitHub=document.getElementById("GitHub").value;
    // let portfolio=document.getElementById("portfolio").value;
    // let img = document.getElementById("img").value;


    ////// multistepper
    function showStep(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.add('hidden'));
      document.getElementById(`step-${step}`).classList.remove('hidden');

      progressBar.style.width = `${(step / 8) * 100}%`;
      for (let i = 1; i <= steps.length; i++) {
        const stepIndicator = document.getElementById(`step${i}`);
        if (i <= step) {
          stepIndicator.classList.remove('opacity-50');
        } else {
          stepIndicator.classList.add('opacity-50');
        }
      }

      prevBtn.classList.toggle('hidden', step === 1);
      nextBtn.classList.toggle('hidden', step === 7);
      submitBtn.classList.toggle('hidden', step !== 7);
    }

    nextBtn.addEventListener('click', () => {
      currentStep++;
      showStep(currentStep);
    });

    prevBtn.addEventListener('click', () => {
      currentStep--;
      showStep(currentStep);
    });

    //// add formation inputs
    const parentinput = document.querySelector(".parent")
    const parentExperiences=document.querySelector(".parentExperiences");
    // const btn = document.getElementById("btn")
    document.getElementsByClassName("btnAddinput").forEach(btn=>
    btn.addEventListener("click", function () {

      let clonedivFormation = parentinput.cloneNode(true);
      let clonedivexperince = parentExperiences.cloneNode(true);

      // inputNew.value="";
      let removebtn = document.createElement("button")
      removebtn.textContent = "supp"
      removebtn.className = 'removebtn'
      clonedivFormation.appendChild(removebtn)
      clonedivexperince.appendChild(removebtn)
      // const educationParent = document.getElementById("step-5")
      // const ExperiencesParent = document.getElementById("step-6")

      this.parentElement.appendChild(clonedivFormation)
      this.parentElement.appendChild(clonedivexperince)

      removebtn.addEventListener("click", () => {
        clonedivFormation.remove()
        clonedivexperince.remove()
      })
    })
  )
      //// add formation inputs


    ///// form a
    form.addEventListener("submit", (e) => {
      e.preventDefault();

      let stepThreeInfo = [];
      let stepThreeSoftSkills = [];
      let loisirs = [];

      let fullName = document.getElementById("fullName").value;
      let email = document.getElementById("email").value;
      let phone = document.getElementById("phone").value;
      let address = document.getElementById("address").value;
      let LinkedIn = document.getElementById("LinkedIn").value;
      let GitHub = document.getElementById("GitHub").value;
      let portfolio = document.getElementById("portfolio").value;
      let title = document.getElementById("titre").value;
      let textarea = document.getElementById("textarea").value;


      /// step : HardSkills,SoftSkills3
      const hardSkillsDiv = document.getElementById("hardSkillsDiv").getElementsByTagName('input');
      Array.from(hardSkillsDiv).forEach((item) => stepThreeInfo.push(item.value));

      const SoftSkillsDiv = document.getElementById("SoftSkillsDiv").getElementsByTagName('input');
      Array.from(SoftSkillsDiv).forEach((item) => stepThreeSoftSkills.push(item.value));
      /// end step 3

      /// step : loisirs 
      const loisirsSection = document.getElementById("loisirs").getElementsByTagName('input');
      Array.from(loisirsSection).forEach((item) => loisirs.push(item.value));


      let formations = [];
      let educationDiv = document.getElementsByClassName("education");
      educationDiv.forEach(formation => {

        let inputFormation = formation.getElementsByTagName("input");

        let inputsFormations = {
          schoole: inputFormation[0].value,
          Staryear1: inputFormation[1].value,
          Endyear2: inputFormation[2].value,
          major: inputFormation[3].value
        };
        formations.push(inputsFormations);
      })


///expo
      let Experiences = [];

      let getExperiences = document.getElementsByClassName("parentExperiences")
      // console.log(getExperiences);

      Array.from(getExperiences).forEach(experience=>{
        let inputExperiences = experience.getElementsByClassName("childinputExperiences");

      let objetExperience = {

      nomEntreprise : inputExperiences[0].value,
      Poste : inputExperiences[1].value,
      StarDate : inputExperiences[2].value,
      EndDate : inputExperiences[3].value,
      location : inputExperiences[4].value,
      description : inputExperiences[5].value,

      };
      Experiences.push(objetExperience);
      })
      console.log(Experiences);


///////// objet cv Builder
      const cvBuilderinfo =
      {
        fullName,
        email,
        phone,
        address,
        LinkedIn,
        GitHub,
        portfolio,
        title,
        textarea,
        stepThreeInfo,
        stepThreeSoftSkills,
        loisirs,
        formations,
        Experiences
      }

      const data = [];
      data.push(cvBuilderinfo);
      console.log(data)
      localStorage.setItem("data", JSON.stringify(data));

      Swal.fire({
        title: 'Form submitted successfully!!',
        icon: 'success',
        confirmButtonText: 'Nice!'
      });
      displayCv();

    });

    showStep(currentStep);

    //////////// ajouter nouveau input dynamic form
    document.querySelectorAll('.fa-circle-plus').forEach(button => {
      button.addEventListener('click', function (e) {
        e.preventDefault();
        // let hardSkillsDiv=document.getElementById("hardSkillsDiv");
        const input = document.createElement('input');
        input.type = 'text';
        input.classList.add('hardS', 'bg-gray-50', 'border', 'border-gray-300', 'text-gray-900', 'text-sm', 'rounded-lg', 'focus:ring-green-500', 'focus:border-green-500', 'block', 'w-full', 'p-2.5');
        this.parentElement.parentElement.appendChild(input);
      });
    });

    window.onload = displayCv();

    function displayCv() {

      const data = JSON.parse(localStorage.getItem("data")) || [];
      let liba = document.getElementById("liba");



      data.forEach(dt => {

        let formationsHTML =""
        let ExperiencesHTML =""

        dt.formations.forEach(frm => {

          formationsHTML += `
              <section class="mt-4 border-b-2 break-inside-avoid pb-4">
                <header class="mb-4">
                  <h3 class="text-xl font-semibold text-gray-700 leading-snug">${frm.schoole}</h3>
                  <p class="text-gray-600 text-lg">
                    Start Year: <span class="font-medium">${frm.Staryear1}</span> – 
                    End Year: <span class="font-medium">${frm.Endyear2}</span>
                  </p>
                  <ul class="list-disc list-inside text-gray-800 text-lg pl-6">
                    <li>
                    <span class="font-semibold">Major:</span> ${frm.major}
                    </li>
                  </ul>
                </header>
              </section>
                          `;
        })

        dt.Experiences.forEach(expo =>{
             ExperiencesHTML +=`
             <header>
                <h3 class="font-semibold text-gray-800 text-md leading-snugish">
                ${expo.nomEntreprise}-${expo.location}
                </h3>
                <p class="text-sm leading-normal text-gray-500">
                    ${expo.StarDate} &ndash; ${expo.EndDate} | Freelance ${expo.Poste}
                </p>
               </header>
               <ul class="pl-3 mt-2 font-normal text-gray-700 text-md leading-snugish">
                <li>
                    <span class="text-gray-500 transform -translate-y-px select-none">
                        &rsaquo;
                    </span>
                  ${expo.description}Created high-quality, customized web applications from scratch, employing a diverse set of programming languages, including HTML, CSS, JavaScript, PHP, and Python, to fulfill unique client requirements.
                </li>
               </ul>  `
        })

        liba.innerHTML = `
     <main class="font-jost hyphens-manual" style="padding-left:2rem; max-height: 90vh; overflow-y: auto;">
    <!-- Page -------------------------------------------------------------------------------------------------------->
    <section class="p-3 my-auto mx-auto max-w-3xl bg-white rounded-2xl border-2 border-gray-700 sm:p-9 md:p-16 lg:mt-6 print:border-0 page print:max-w-letter print:max-h-letter print:mx-0 print:my-o xsm:p-8 print:bg-white md:max-w-letter md:h-letter lg:h-letter">
        <!-- Name ---------------------------------------------------------------------------------------------------->
        <header class="inline-flex justify-between items-baseline mb-2 w-full align-top border-b-4 border-gray-300">
                      <section class="block">
                        <img src="">
                      </section>
          <section class="block">
                <h1 class="mb-0 text-3xl font-bold text-gray-700">
                    ${dt.fullName}
                </h1>
                <!--Job Title--------------------------------------------------------------------------------------------------------->
                <h2 class="m-0 ml-2 text-2xl font-semibold text-gray-700 leading-snugish">
                    ${dt.title}
                </h2>
                <!--Location --------------------------------------------------------------------------------------------------------->

                <h3 class="m-0 mt-2 ml-2 text-xl font-semibold text-gray-500 leading-snugish">
                    ${dt.address}
                </h3>
                <h3 class="m-0 mt-2 ml-2 text-xl font-semibold text-gray-500 leading-snugish">
                    ${dt.phone}
                </h3>
            </section>
            <!--   Initials Block   -->
        </header>

        <!-- Column -------------------------------------------------------------------------------------------------->
        <section class="col-gap-8 print:col-count-2 print:h-letter-col-full col-fill-balance md:col-count-2 md:h-letter-col-full">
            <section class="flex-col">
                <!-- Contact Information ------------------------------------------------------------------------------------->
                <section class="pb-2 mt-4 mb-0 first:mt-0">
                    <!-- To keep in the same column -------------------------------------------------------------------------->
                    <section class="break-inside-avoid">
                        <section class="pb-4 mb-2 border-b-4 border-gray-300 break-inside-avoid">
                            <ul class="pr-7 list-inside">
                                <li class="mt-1 leading-normal text-black text-gray-500 transition duration-100 ease-in hover:text-gray-700 text-md print:">
                                    <a href="${dt.portfolio}" class="group">
                                        <span class="mr-2 text-lg font-semibold text-gray-700 leading-snugish">
                                            Portfolio : ${dt.portfolio}
                                        </span> 
                                    </a>
                                </li>
                                <li class="mt-1 leading-normal text-gray-500 transition duration-100 ease-in hover:text-gray-700 text-md">
                                    <a href="${dt.GitHub}" class="group">
                                        <span class="mr-5 text-lg font-semibold text-gray-700 leading-snugish">
                                            Github: ${dt.GitHub}
                                        </span>
                                    </a>
                                </li>
                                <li class="mt-1 leading-normal text-gray-500 transition duration-100 ease-in hover:text-gray-700 text-md">
                                    <a href="" class="group">
                                        <span class="mr-8 text-lg font-semibold text-gray-700 leading-snugish">
                                            Email:${dt.email}
                                        </span>
                                    </a>
                                </li>
                                <li class="mt-1 leading-normal text-gray-500 transition duration-100 ease-in hover:text-gray-700 text-md">
                                    <a href="">
                                        <span class="mr-5 text-lg font-semibold text-gray-700 leading-snugish">
                                            Phone: ${dt.phone}
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </section>
                    </section>
                </section>

                <!--Summary ---------------------------------------------------------------------------------------------------------->
                <section class="pb-2 pb-4 mt-0 border-b-4 border-gray-300 first:mt-0">
                    <!-- To keep in the same column -->
                    <section class="break-inside-avoid">
                        <h2 class="mb-2 text-xl font-bold tracking-widest text-gray-700 print:font-normal">
                            SUMMARY
                        </h2>
                        <section class="mb-2 break-inside-avoid">
                            <p class="mt-2 leading-normal text-gray-700 text-md">
                                ${dt.textarea}
                                Experienced full-stack web developer with a strong track record of independently addressing complex business requirements and overcoming challenges to deliver polished and user-friendly web solutions.
                            </p>
                        </section> 
                    </section>
                </section>

                <!--Education -------------------------------------------------------------------------------------------------------->
                <section class="pb-0 mt-2 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                    <section class="break-inside-avoid">
                        <h2 class="mb-2 text-lg font-bold tracking-widest text-gray-700 print:font-normal">
                            EDUCATION
                        </h2>
                        <section class="mt-2 border-b-2 break-inside-avoid">
                            <header>
                                <section class="pb-0 mt-2 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                                    ${formationsHTML}
                                </section>
                            </header>
                        </section>
                    </section>

                    <!--Begin HardSkills ----------------------------------------------------------------------------------------------------->
                    <section class="pb-6 mt-0 mb-4 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                        <section class="break-inside-avoid">
                            <h2 class="mb-2 text-lg font-bold tracking-widest text-gray-700 print:font-normal">
                                HardSkills
                            </h2>
                            <section class="mb-0 break-inside-avoid">
                                <section class="mt-1 last:pb-1">
                                    <ul class="flex flex-wrap -mb-1 font-bold leading-relaxed text-md -mr-1.6">
                                        ${dt.stepThreeInfo.map(item => `<li>${item}</li>`).join(",")}
                                    </ul>
                                </section>
                            </section>
                        </section>
                    </section>

                    <!--Begin SoftSkills ----------------------------------------------------------------------------------------------------->
                    <section class="pb-6 mt-0 mb-4 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                        <section class="break-inside-avoid">
                            <h2 class="mb-2 text-lg font-bold tracking-widest text-gray-700 print:font-normal">
                                SoftSkills
                            </h2>
                            <ul>
                                ${dt.stepThreeSoftSkills.map(item => `<li>${item}</li>`).join(",")}
                            </ul>
                        </section>
                    </section>

                    <!--Education -------------------------------------------------------------------------------------------------------->
                <section class="pb-0 mt-2 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                    <section class="break-inside-avoid">
                        <h2 class="mb-2 text-lg font-bold tracking-widest text-gray-700 print:font-normal">
                            EDUCATION
                        </h2>
                        <section class="mt-2 border-b-2 break-inside-avoid">
                            <header>
                                <section class="pb-0 mt-2 border-b-4 border-gray-300 first:mt-0 break-inside-avoid">
                                    ${ExperiencesHTML}
                                </section>
                            </header>
                        </section>
                    </section>
                </section>
            </section>
        </section>
    </section>
</main>

    `;
      });
    }

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

  <!-- <script src="/asset/scripts/script.js"></script> -->
</body>

</html>